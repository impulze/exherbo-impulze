# Copyright 2008, 2009 Daniel Mierswa <impulze@impulze.org>
# Distributed under the terms of the GNU General Public License v2

require autotools [ supported_autoconf=[ 2.5 ] supported_automake=[ 1.10 ] ]

SUMMARY="A library to read zip files."
DESCRIPTION="The implementation is based only on the (free) subset of
compression with the zlib algorithm."
HOMEPAGE="http://$PN.sourceforge.net"
DOWNLOADS="mirror://sourceforge/$PN/$PNV.tar.bz2"

LICENCES="|| ( LGPL-2 MPL-1.1 )"
SLOT="0"
PLATFORMS="~amd64"
MYOPTIONS="sdl"

DEPENDENCIES="
    build:
        dev-lang/python
        dev-util/pkg-config
    build+run:
        sdl? ( media-libs/SDL )
        sys-libs/zlib
"

DEFAULT_SRC_CONFIGURE_OPTION_ENABLES+=( sdl )
DEFAULT_SRC_TEST_PARAMS+=( -j1 )

# FIXME:
# xmlto can re-generate man-pages appearently but seems to be unwanted by
# upstream (or known to be partly broken, also requires docbook-xml-dtd:4.1.2)
DEFAULT_SRC_PREPARE_PATCHES="${FILES}/${PN}-0.13.54-no_xmlto.patch"

AT_M4DIR="m4"
